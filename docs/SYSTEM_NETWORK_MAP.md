# ğŸ—ºï¸ FactoryLM System Network Map
## Mike's Knowledge Bases, Databases & LLMs

*Generated: 2026-02-03*

---

## ğŸ—ï¸ Architecture Overview

```
                                    â˜ï¸ CLOUD SERVICES
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚  â”‚   Neon DB   â”‚  â”‚  LangFuse   â”‚  â”‚  Anthropic  â”‚              â”‚
    â”‚  â”‚ PostgreSQL  â”‚  â”‚ Observabilityâ”‚  â”‚   Claude    â”‚              â”‚
    â”‚  â”‚  (us-east)  â”‚  â”‚   Cloud     â”‚  â”‚    API      â”‚              â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜              â”‚
    â”‚         â”‚                 â”‚                 â”‚                     â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”              â”‚
    â”‚  â”‚  OpenAI    â”‚  â”‚    Groq     â”‚  â”‚   Plane     â”‚              â”‚
    â”‚  â”‚   GPT-4    â”‚  â”‚  (Default)  â”‚  â”‚  Projects   â”‚              â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â”‚
    â”‚         â”‚                 â”‚                                       â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
              â”‚                 â”‚
              â–¼                 â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                    ğŸ–¥ï¸ VPS (72.60.175.144)                        â”‚
    â”‚                    Tailscale: 100.102.30.102                     â”‚
    â”‚                                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚                    APPLICATIONS                          â”‚    â”‚
    â”‚  â”‚                                                          â”‚    â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
    â”‚  â”‚  â”‚  Clawdbot    â”‚  â”‚ FactoryLM    â”‚  â”‚  Rivet-PRO   â”‚   â”‚    â”‚
    â”‚  â”‚  â”‚   (Jarvis)   â”‚  â”‚  Diagnosis   â”‚  â”‚   Backend    â”‚   â”‚    â”‚
    â”‚  â”‚  â”‚  Claude 4.5  â”‚  â”‚  Port 8200   â”‚  â”‚              â”‚   â”‚    â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
    â”‚  â”‚                                                          â”‚    â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
    â”‚  â”‚  â”‚ Atlas CMMS   â”‚  â”‚     n8n      â”‚  â”‚   Mautic     â”‚   â”‚    â”‚
    â”‚  â”‚  â”‚ Port 8080    â”‚  â”‚  Port 5678   â”‚  â”‚  Port 8081   â”‚   â”‚    â”‚
    â”‚  â”‚  â”‚ Frontend:3000â”‚  â”‚  Workflows   â”‚  â”‚   Email      â”‚   â”‚    â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                                                   â”‚
    â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
    â”‚  â”‚                    LOCAL DATABASES                       â”‚    â”‚
    â”‚  â”‚                                                          â”‚    â”‚
    â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚    â”‚
    â”‚  â”‚  â”‚  PostgreSQL  â”‚  â”‚    Redis     â”‚  â”‚   MariaDB    â”‚   â”‚    â”‚
    â”‚  â”‚  â”‚  (pgvector)  â”‚  â”‚    Cache     â”‚  â”‚   (Mautic)   â”‚   â”‚    â”‚
    â”‚  â”‚  â”‚  Port 5432   â”‚  â”‚  Port 6379   â”‚  â”‚  Port 3306   â”‚   â”‚    â”‚
    â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚    â”‚
    â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
    â”‚                                                                   â”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                    Tailscale VPN Network
                                â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                       â”‚                       â”‚
        â–¼                       â–¼                       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Travel Laptop â”‚      â”‚  PLC Laptop   â”‚      â”‚ Raspberry Pi  â”‚
â”‚ 100.83.251.23 â”‚      â”‚ 100.72.2.99   â”‚      â”‚ (Pending)     â”‚
â”‚               â”‚      â”‚               â”‚      â”‚               â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚  Jarvis   â”‚ â”‚      â”‚ â”‚  Jarvis   â”‚ â”‚      â”‚ â”‚pi-gateway â”‚ â”‚
â”‚ â”‚   Node    â”‚ â”‚      â”‚ â”‚   Node    â”‚ â”‚      â”‚ â”‚  Modbus   â”‚ â”‚
â”‚ â”‚   :8765   â”‚ â”‚      â”‚ â”‚   :8765   â”‚ â”‚      â”‚ â”‚  OPC UA   â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚               â”‚      â”‚               â”‚      â”‚               â”‚
â”‚               â”‚      â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚      â”‚       â”‚       â”‚
â”‚               â”‚      â”‚ â”‚  Ollama   â”‚ â”‚      â”‚       â”‚       â”‚
â”‚               â”‚      â”‚ â”‚ llama3:8b â”‚ â”‚      â”‚       â–¼       â”‚
â”‚               â”‚      â”‚ â”‚  :11434   â”‚ â”‚      â”‚    â”Œâ”€â”€â”€â”€â”€â”    â”‚
â”‚               â”‚      â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚      â”‚    â”‚ PLC â”‚    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Database Details

### Cloud Databases (Neon PostgreSQL)

| Database | Purpose | Connection |
|----------|---------|------------|
| `neondb` | Rivet-PRO main | ep-purple-hall-ahimeyn0-pooler.c-3.us-east-1.aws.neon.tech |
| `atlas_cmms` | CMMS data | Same Neon cluster |
| `rivet` | Knowledge Base | VPS local reference |

### Local Databases (VPS Docker)

| Database | Container | Port | Purpose |
|----------|-----------|------|---------|
| PostgreSQL + pgvector | infra_postgres_1 | 5432 | Local data, embeddings |
| Redis | infra_redis_1 | 6379 | Cache, sessions |
| MariaDB | mautic_db | 3306 | Mautic email marketing |

---

## ğŸ¤– LLM Configuration

### Primary LLMs

| Provider | Model | Used By |
|----------|-------|---------|
| **Anthropic** | Claude Opus 4.5 | Clawdbot (Jarvis) |
| **Anthropic** | Claude Sonnet 4 | Fallback/secondary |
| **Groq** | (Default) | Rivet-PRO |
| **OpenAI** | GPT-4 | Rivet-PRO alternate |
| **Ollama** | llama3:8b | PLC Laptop local |

### API Keys Configured

- âœ… Anthropic (Claude)
- âœ… OpenAI (GPT-4)
- âœ… Groq (Fast inference)
- âœ… LangFuse (Observability)

---

## ğŸ“¡ Service Endpoints

### VPS Services

| Service | Port | URL | Status |
|---------|------|-----|--------|
| Atlas CMMS Backend | 8080 | http://localhost:8080 | âœ… Running |
| Atlas CMMS Frontend | 3000 | http://localhost:3000 | âœ… Running |
| FactoryLM Diagnosis | 8200 | http://localhost:8200 | âœ… Running |
| n8n Workflows | 5678 | http://localhost:5678 | âœ… Running |
| Mautic Email | 8081 | http://localhost:8081 | âœ… Running |

### Laptop Services

| Service | Device | Port | Purpose |
|---------|--------|------|---------|
| Jarvis Node API | Both laptops | 8765 | Remote control, notifications |
| Ollama | PLC Laptop | 11434 | Local LLM inference |

### External Services

| Service | URL | Purpose |
|---------|-----|---------|
| LangFuse | us.cloud.langfuse.com | AI observability |
| Plane | plane.factorylm.com | Project management |
| Neon | *.neon.tech | Cloud PostgreSQL |

---

## ğŸ”„ Data Flow

### User Query â†’ AI Response

```
User (Telegram)
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Clawdbot    â”‚ â”€â”€â”€â”€ Claude API (Anthropic)
â”‚   (VPS)      â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€ Factory keywords? â”€â”€â”€â–¶ FactoryLM Diagnosis (:8200)
       â”‚                                    â”‚
       â”‚                                    â–¼
       â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                           â”‚  PLC Laptop  â”‚
       â”‚                           â”‚  System Info â”‚
       â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”œâ”€â”€â”€â”€ CMMS query? â”€â”€â”€â”€â”€â”€â”€â”€â”€â–¶ Atlas CMMS (:8080)
       â”‚                                    â”‚
       â”‚                                    â–¼
       â”‚                           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚                           â”‚  Neon DB     â”‚
       â”‚                           â”‚  atlas_cmms  â”‚
       â”‚                           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â””â”€â”€â”€â”€ Knowledge query? â”€â”€â”€â”€â–¶ Rivet-PRO
                                           â”‚
                                           â–¼
                                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                                   â”‚  Neon DB     â”‚
                                   â”‚   neondb     â”‚
                                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Observability Flow

```
All LLM Calls
      â”‚
      â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LangFuse    â”‚ â”€â”€â”€â”€ Traces, costs, latency
â”‚   Client     â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  LangFuse    â”‚
â”‚    Cloud     â”‚ â”€â”€â”€â”€ Dashboard at us.cloud.langfuse.com
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ƒï¸ Knowledge Bases

### Rivet-PRO Knowledge Base
- **Location:** Neon PostgreSQL (`neondb`)
- **Type:** Structured + embeddings (pgvector)
- **Content:** Equipment manuals, troubleshooting, procedures

### Atlas CMMS
- **Location:** Neon PostgreSQL (`atlas_cmms`)
- **Type:** Structured data
- **Content:** Work orders, assets, maintenance records

### Local Files (VPS)
- **Location:** /root/jarvis-workspace/
- **Type:** Markdown files
- **Content:** Memory, projects, research, documentation

---

## ğŸ” Security

### Authentication
- Tailscale VPN for all internal traffic
- SSH keys for laptop access
- API tokens for cloud services

### Network Isolation
- Laptops only accessible via Tailscale
- Database not exposed to internet
- Services bound to localhost where possible

---

## ğŸ“ˆ Future Additions (Planned)

1. **Raspberry Pi Edge Gateway**
   - Tailscale IP: TBD
   - Services: pi-gateway, Modbus, OPC UA
   - Status: SD card flashed, waiting for boot

2. **MQTT Broker**
   - For real-time PLC data streaming
   - Device events and alerts

3. **Grafana Dashboard**
   - System health monitoring
   - LLM usage metrics

---

*This map reflects the system state as of 2026-02-03*
